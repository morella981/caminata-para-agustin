<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Caminata para Agust√≠n</title>
<style>
  body { margin: 0; overflow: hidden; background:#87cfff; }
  canvas { display:block; image-rendering: pixelated; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// IM√ÅGENES
const agustin = new Image();
agustin.src = "agustin.png";

const morella = new Image();
morella.src = "morella.png";

// JUGADOR
const player = {
  x: 100,
  y: 0,
  w: 64,
  h: 64,
  speed: 4
};

const groundY = canvas.height - 100;
player.y = groundY - player.h;

// CARTAS
const cartas = [
  { x: 400, texto: "Sos mi lugar favorito üíå", tomada:false },
  { x: 700, texto: "Caminar con vos es hogar üíó", tomada:false },
  { x: 1000, texto: "Te elijo siempre üíï", tomada:false }
];

let cartaActiva = null;

// INPUT
const keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

// UPDATE
function update() {
  if (keys["ArrowRight"]) player.x += player.speed;
  if (keys["ArrowLeft"]) player.x -= player.speed;

  cartas.forEach(c => {
    if (!c.tomada && Math.abs(player.x - c.x) < 40) {
      cartaActiva = c;
      if (keys["Enter"]) c.tomada = true;
    }
  });
}

// DRAW
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const camX = Math.max(player.x - 200, 0);

  // cielo
  ctx.fillStyle="#87cfff";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // nubes
  ctx.fillStyle="#fff";
  for(let i=0;i<6;i++){
    ctx.fillRect(i*300 - camX*0.3, 80, 120, 40);
  }

  // √°rboles
  for(let i=0;i<40;i++){
    ctx.fillStyle="#2f7d32";
    ctx.fillRect(i*80 - camX, groundY-120, 40, 120);
  }

  // suelo
  ctx.fillStyle="#5b3a1e";
  ctx.fillRect(0, groundY, canvas.width, 100);

  // cartas
  cartas.forEach(c=>{
    if(!c.tomada){
      ctx.fillStyle="#ffd1dc";
      ctx.fillRect(c.x - camX, groundY - 30, 20, 30);
    }
  });

  // jugador
  ctx.drawImage(agustin, player.x - camX, player.y, player.w, player.h);

  // carta abierta
  if (cartaActiva && !cartaActiva.tomada) {
    ctx.fillStyle="#fff";
    ctx.fillRect(50,50,400,120);
    ctx.fillStyle="#000";
    ctx.font="20px monospace";
    ctx.fillText(cartaActiva.texto, 70,120);
    ctx.font="14px monospace";
    ctx.fillText("Presion√° ENTER", 70,160);
  }
}

// LOOP
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
