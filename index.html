<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Caminata para Agust√≠n üíô</title>
<style>
body { margin:0; overflow:hidden; font-family:sans-serif; }
canvas { display:block; }
#dialog {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  display: none;
  align-items: center;
  justify-content: center;
}
#dialogBox {
  background: white;
  padding: 25px;
  border-radius: 20px;
  max-width: 420px;
  text-align: center;
}
#dialogBox button {
  margin-top: 15px;
  padding: 8px 16px;
  border: none;
  border-radius: 10px;
  background: pink;
  cursor: pointer;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="dialog">
  <div id="dialogBox">
    <p id="dialogText"></p>
    <button onclick="closeDialog()">Cerrar üíå</button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const dialog = document.getElementById("dialog");
const dialogText = document.getElementById("dialogText");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

// =====================
// CONTROLES
// =====================
const keys = {};
window.addEventListener("keydown", e => keys[e.key]=true);
window.addEventListener("keyup", e => keys[e.key]=false);

// =====================
// C√ÅMARA
// =====================
let cameraX = 0;

// =====================
// JUGADOR
// =====================
let player = {
  x: 200,
  speed: 4
};

// =====================
// CARTAS
// =====================
const cards = [
  { x: 600, text:"Hola mi amor, espero que disfrutes esta caminata :)", color:"#f7c1d9" },
  { x: 900, text:"Ojal√° no te empaches con los chocolates de hoy", color:"#f4d6a0" },
  { x: 1200, text:"Sos el chico mas lindo hasta en formato 2D", color:"#c1d9f7" },
  { x: 1500, text:"Se te acumulan los pajaritos, ya pensaste un nombre para cada uno?", color:"#d3c1f7" },
  { x: 1800, text:"Apurate que te estoy esperando!!", color:"#c1f7d9" },
  { x: 2100, text:"Ya casi me encontr√°s, besitoo", color:"#f7c1c1" }
];

let birds = [];
let activeCard = null;

// =====================
// FONDO
// =====================
function drawSky(){
  const g = ctx.createLinearGradient(0,0,0,canvas.height);
  g.addColorStop(0,"#f7b7d2");
  g.addColorStop(0.5,"#d6b4f0");
  g.addColorStop(1,"#a8c7e8");
  ctx.fillStyle=g;
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

function cloud(x,y,s){
  ctx.fillStyle="rgba(255,255,255,0.85)";
  ctx.beginPath();
  ctx.arc(x,y,30*s,0,Math.PI*2);
  ctx.arc(x+30*s,y-10*s,35*s,0,Math.PI*2);
  ctx.arc(x+70*s,y,30*s,0,Math.PI*2);
  ctx.fill();
}

function drawClouds(){
  cloud(200-cameraX*0.3,120,1);
  cloud(600-cameraX*0.3,200,1.2);
  cloud(1000-cameraX*0.3,150,1);
  cloud(1500-cameraX*0.3,220,1.4);
}

function tree(x,y){
  ctx.fillStyle="#8b6f4e";
  ctx.fillRect(x-5,y,10,40);
  ctx.fillStyle="#a6d8b5";
  ctx.beginPath();
  ctx.arc(x,y,25,0,Math.PI*2);
  ctx.fill();
}

function drawTrees(){
  for(let i=0;i<20;i++){
    tree(i*250-cameraX*0.6, canvas.height-180);
  }
}

function drawGround(){
  ctx.fillStyle="#b9e3c6";
  ctx.fillRect(-cameraX,canvas.height-140,5000,140);
  ctx.fillStyle="#c9a46a";
  ctx.fillRect(-cameraX,canvas.height-70,5000,70);
}

// =====================
// PERSONAJE
// =====================
function drawPlayer(){
  const y = canvas.height - 160;
  ctx.save();
  ctx.translate(player.x-cameraX,y);

  ctx.fillStyle="#ffe0cc";
  ctx.beginPath();
  ctx.arc(0,-28,14,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle="#8b6a3e";
  ctx.beginPath();
  ctx.arc(-5,-30,2.5,0,Math.PI*2);
  ctx.arc(5,-30,2.5,0,Math.PI*2);
  ctx.fill();

  ctx.strokeStyle="#a05a4a";
  ctx.beginPath();
  ctx.arc(0,-25,6,0,Math.PI);
  ctx.stroke();

  ctx.fillStyle="#a67c52";
  ctx.fillRect(-14,-45,28,12);

  ctx.fillStyle="#7db9e8";
  ctx.fillRect(-12,-10,24,22);
  ctx.fillStyle="#f4e38a";
  ctx.fillRect(-12,0,24,6);

  ctx.fillStyle="#555";
  ctx.fillRect(-8,12,6,18);
  ctx.fillRect(2,12,6,18);

  ctx.restore();
}

// =====================
// CARTAS & PAJARITOS
// =====================
function drawCards(){
  cards.forEach(c=>{
    if(!c.collected){
      ctx.fillStyle=c.color;
      ctx.fillRect(c.x-cameraX,canvas.height-170,26,34);
    }
  });
}

function drawPaperBird(bird, index){
  const flap = Math.sin(Date.now()/200 + index)*4;

  ctx.save();
  ctx.translate(bird.x-cameraX, canvas.height-230 + flap);

  ctx.fillStyle = bird.color;

  // ala izquierda
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.lineTo(-18,-8);
  ctx.lineTo(-5,5);
  ctx.closePath();
  ctx.fill();

  // ala derecha
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.lineTo(18,-8);
  ctx.lineTo(5,5);
  ctx.closePath();
  ctx.fill();

  // cuerpo
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.lineTo(5,10);
  ctx.lineTo(-5,10);
  ctx.closePath();
  ctx.fill();

  ctx.restore();
}

function drawBirds(){
  birds.forEach((b,i)=>{
    b.x += (player.x-40*i-b.x)*0.05;
    drawPaperBird(b,i);
  });
}

// =====================
// DI√ÅLOGO
// =====================
function openDialog(card){
  activeCard = card;
  dialogText.innerText = card.text;
  dialog.style.display="flex";
}
function closeDialog(){
  dialog.style.display="none";
  activeCard.collected=true;
  birds.push({x:player.x,color:activeCard.color});
  activeCard=null;
}

// =====================
// LOOP
// =====================
function update(){
  drawSky();
  drawClouds();
  drawTrees();
  drawGround();

  if(keys["ArrowRight"]) player.x+=player.speed;
  if(keys["ArrowLeft"]) player.x-=player.speed;

  cameraX = player.x - canvas.width/3;

  drawCards();
  drawBirds();
  drawPlayer();

  cards.forEach(c=>{
    if(!c.collected && Math.abs(player.x-c.x)<25){
      openDialog(c);
    }
  });

  requestAnimationFrame(update);
}
update();
</script>

</body>
</html>
