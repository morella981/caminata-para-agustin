<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Caminata para Agustín</title>
<style>
  body { margin:0; overflow:hidden; background:#87cfff; }
  canvas { display:block; image-rendering: pixelated; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// IMÁGENES
const agustin = new Image();
agustin.src = "agustin.png";

// JUGADOR
const player = {
  x: 100,
  w: 64,
  h: 64,
  speed: 4
};

const groundY = canvas.height - 100;
player.y = groundY - player.h + 8;

// CARTAS (TUS FRASES)
const cartas = [
  { x: 400, color:"#ffd1dc", texto:"Hola mi amor, espero que disfrutes esta caminata :)", tomada:false },
  { x: 650, color:"#d1e8ff", texto:"Ojalá no te empaches con los chocolates de hoy", tomada:false },
  { x: 900, color:"#e8d1ff", texto:"Sos el chico más lindo hasta en formato 2D", tomada:false },
  { x: 1150, color:"#d1ffe3", texto:"Se te acumulan los pajaritos, ya pensaste un nombre para cada uno?", tomada:false },
  { x: 1400, color:"#fff3d1", texto:"Apurate que te estoy esperando!!", tomada:false },
  { x: 1650, color:"#ffd1f0", texto:"Ya casi me encontrás, besitoo", tomada:false }
];

let cartaAbierta = null;

// PÁJAROS
const pajaros = [];

// INPUT
const keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

// UPDATE
function update() {
  if (!cartaAbierta) {
    if (keys["ArrowRight"]) player.x += player.speed;
    if (keys["ArrowLeft"]) player.x -= player.speed;
  }

  cartas.forEach(c => {
    if (!c.tomada && !cartaAbierta && Math.abs(player.x - c.x) < 30) {
      cartaAbierta = c;
    }
  });

  // cerrar carta
  if (cartaAbierta && keys["Enter"]) {
    cartaAbierta.tomada = true;
    pajaros.push({
      color: cartaAbierta.color,
      offsetX: Math.random()*40,
      offsetY: -60 - Math.random()*30,
      flap: Math.random()*10
    });
    cartaAbierta = null;
  }

  pajaros.forEach(p => p.flap += 0.1);
}

// DRAW
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const camX = Math.max(player.x - 200, 0);

  // cielo
  ctx.fillStyle="#87cfff";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // nubes
  ctx.fillStyle="#fff";
  for(let i=0;i<6;i++){
    ctx.fillRect(i*300 - camX*0.3, 80, 120, 40);
  }

  // árboles
  for(let i=0;i<40;i++){
    ctx.fillStyle="#2f7d32";
    ctx.fillRect(i*80 - camX, groundY-120, 40, 120);
  }

  // suelo
  ctx.fillStyle="#5b3a1e";
  ctx.fillRect(0, groundY, canvas.width, 100);

  // cartas
  cartas.forEach(c=>{
    if(!c.tomada){
      ctx.fillStyle=c.color;
      ctx.fillRect(c.x - camX, groundY - 30, 22, 30);
    }
  });

  // pajaros
  pajaros.forEach((p,i)=>{
    const x = player.x - camX + p.offsetX + i*14;
    const y = player.y + p.offsetY + Math.sin(p.flap)*6;
    ctx.fillStyle=p.color;
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.lineTo(x+12,y+6);
    ctx.lineTo(x,y+12);
    ctx.fill();
  });

  // jugador
  ctx.drawImage(agustin, player.x - camX, player.y, player.w, player.h);

  // carta abierta (overlay)
  if (cartaAbierta) {
    ctx.fillStyle="#fff";
    ctx.fillRect(canvas.width/2 - 250, canvas.height/2 - 100, 500, 200);
    ctx.strokeRect(canvas.width/2 - 250, canvas.height/2 - 100, 500, 200);

    ctx.fillStyle="#000";
    ctx.font="20px monospace";
    ctx.fillText(cartaAbierta.texto, canvas.width/2 - 220, canvas.height/2);
    ctx.font="14px monospace";
    ctx.fillText("Presioná ENTER para cerrar", canvas.width/2 - 220, canvas.height/2 + 40);
  }
}

// LOOP
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
