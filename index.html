<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Caminata para AgustÃ­n ðŸ’™</title>
<style>
body { margin:0; overflow:hidden; font-family: sans-serif; }
canvas { display:block; }
#dialog {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  display: none;
  align-items: center;
  justify-content: center;
}
#dialogBox {
  background: white;
  padding: 25px;
  border-radius: 20px;
  max-width: 400px;
  text-align: center;
}
#dialogBox button {
  margin-top: 15px;
  padding: 8px 16px;
  border: none;
  border-radius: 10px;
  background: pink;
  cursor: pointer;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="dialog">
  <div id="dialogBox">
    <p id="dialogText"></p>
    <button onclick="closeDialog()">Cerrar ðŸ’Œ</button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const dialog = document.getElementById("dialog");
const dialogText = document.getElementById("dialogText");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// =====================
// CONTROLES
// =====================
const keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

// =====================
// JUGADOR
// =====================
let player = { x: 200, speed: 3 };

// =====================
// CARTAS
// =====================
const cards = [
  { x: 500, text: "Hola mi amor, espero que disfrutes esta caminata :)", color:"#f7c1d9" },
  { x: 800, text: "OjalÃ¡ no te empaches con los chocolates de hoy", color:"#f4d6a0" },
  { x: 1100, text: "Sos el chico mas lindo hasta en formato 2D", color:"#c1d9f7" },
  { x: 1400, text: "Se te acumulan los pajaritos, ya pensaste un nombre para cada uno?", color:"#d3c1f7" },
  { x: 1700, text: "Apurate que te estoy esperando!!", color:"#c1f7d9" },
  { x: 2000, text: "Ya casi me encontrÃ¡s, besitoo", color:"#f7c1c1" }
];

let birds = [];
let activeCard = null;

// =====================
// FONDO
// =====================
function drawSky() {
  const g = ctx.createLinearGradient(0,0,0,canvas.height);
  g.addColorStop(0,"#f7b7d2");
  g.addColorStop(0.5,"#d6b4f0");
  g.addColorStop(1,"#a8c7e8");
  ctx.fillStyle = g;
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

function drawGround() {
  ctx.fillStyle="#b9e3c6";
  ctx.fillRect(0,canvas.height-120,canvas.width,120);
  ctx.fillStyle="#c9a46a";
  ctx.fillRect(0,canvas.height-60,canvas.width,60);
}

// =====================
// DIBUJOS
// =====================
function drawPlayer(){
  const y = canvas.height - 140;
  ctx.save();
  ctx.translate(player.x,y);

  ctx.fillStyle="#ffe0cc";
  ctx.beginPath();
  ctx.arc(0,-28,14,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle="#8b6a3e";
  ctx.beginPath();
  ctx.arc(-5,-30,2.5,0,Math.PI*2);
  ctx.arc(5,-30,2.5,0,Math.PI*2);
  ctx.fill();

  ctx.strokeStyle="#a05a4a";
  ctx.beginPath();
  ctx.arc(0,-25,6,0,Math.PI);
  ctx.stroke();

  ctx.fillStyle="#a67c52";
  ctx.fillRect(-14,-45,28,12);

  ctx.fillStyle="#7db9e8";
  ctx.fillRect(-12,-10,24,22);
  ctx.fillStyle="#f4e38a";
  ctx.fillRect(-12,0,24,6);

  ctx.restore();
}

function drawCards(){
  cards.forEach(c=>{
    if(!c.collected){
      ctx.fillStyle=c.color;
      ctx.fillRect(c.x,canvas.height-140,24,32);
    }
  });
}

function drawBirds(){
  birds.forEach((b,i)=>{
    b.x += (player.x - 30*i - b.x)*0.05;
    ctx.fillStyle=b.color;
    ctx.beginPath();
    ctx.moveTo(b.x,canvas.height-180);
    ctx.lineTo(b.x+10,canvas.height-170);
    ctx.lineTo(b.x,canvas.height-160);
    ctx.fill();
  });
}

// =====================
// DIÃLOGO
// =====================
function openDialog(card){
  activeCard = card;
  dialogText.innerText = card.text;
  dialog.style.display="flex";
}

function closeDialog(){
  dialog.style.display="none";
  activeCard.collected=true;
  birds.push({x:player.x,color:activeCard.color});
  activeCard=null;
}

// =====================
// LOOP
// =====================
function update(){
  drawSky();
  drawGround();

  if(keys["ArrowRight"]) player.x+=player.speed;
  if(keys["ArrowLeft"]) player.x-=player.speed;

  drawCards();
  drawBirds();
  drawPlayer();

  cards.forEach(c=>{
    if(!c.collected && Math.abs(player.x-c.x)<20){
      openDialog(c);
    }
  });

  requestAnimationFrame(update);
}
update();
</script>

</body>
</html>
